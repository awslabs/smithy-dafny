# Code generated by smithy-python-codegen DO NOT EDIT.

import module_
from simple_dafnyexternv2_internaldafny_types import (
    ExternV2MustErrorInput_ExternV2MustErrorInput as DafnyExternV2MustErrorInput,
    ExternV2MustErrorOutput_ExternV2MustErrorOutput as DafnyExternV2MustErrorOutput,
    GetExternV2Input_GetExternV2Input as DafnyGetExternV2Input,
    GetExternV2Output_GetExternV2Output as DafnyGetExternV2Output,
    UseClassExternV2Input_UseClassExternV2Input as DafnyUseClassExternV2Input,
    UseClassExternV2Output_UseClassExternV2Output as DafnyUseClassExternV2Output,
)
import smithygenerated.simple_dafnyexternv2.dafny_to_smithy
import smithygenerated.simple_dafnyexternv2.models
import smithygenerated.simple_dafnyexternv2.smithy_to_dafny
from typing import Any

from .errors import CollectionOfErrors, OpaqueError, ServiceError


import Wrappers
import simple_dafnyexternv2_internaldafny_types
import smithygenerated.simple_dafnyexternv2.client as client_impl

def smithy_error_to_dafny_error(e: ServiceError):
    '''
    Converts the provided native Smithy-modelled error
    into the corresponding Dafny error.
    '''
    if isinstance(e, CollectionOfErrors):
        return simple_dafnyexternv2_internaldafny_types.Error_CollectionOfErrors(message=e.message, list=e.list)

    if isinstance(e, OpaqueError):
        return simple_dafnyexternv2_internaldafny_types.Error_Opaque(obj=e.obj)

class SimpleExternV2Shim(simple_dafnyexternv2_internaldafny_types.ISimpleExternV2Client):
    def __init__(self, _impl: client_impl) :
        self._impl = _impl

    def GetExternV2(self, input) -> Any:
        smithy_client_request: GetExternV2Input = smithygenerated.simple_dafnyexternv2.dafny_to_smithy.DafnyToSmithy_simple_dafnyexternv2_GetExternV2Input(input)
        try:
            smithy_client_response = self._impl.get_extern_v2(smithy_client_request)
        except ServiceError as e:
            return Wrappers.Result_Failure(smithy_error_to_dafny_error(e))

        return Wrappers.Result_Success(smithygenerated.simple_dafnyexternv2.smithy_to_dafny.SmithyToDafny_simple_dafnyexternv2_GetExternV2Output(smithy_client_response))

    def UseClassExternV2(self, input) -> Any:
        smithy_client_request: UseClassExternV2Input = smithygenerated.simple_dafnyexternv2.dafny_to_smithy.DafnyToSmithy_simple_dafnyexternv2_UseClassExternV2Input(input)
        try:
            smithy_client_response = self._impl.use_class_extern_v2(smithy_client_request)
        except ServiceError as e:
            return Wrappers.Result_Failure(smithy_error_to_dafny_error(e))

        return Wrappers.Result_Success(smithygenerated.simple_dafnyexternv2.smithy_to_dafny.SmithyToDafny_simple_dafnyexternv2_UseClassExternV2Output(smithy_client_response))

    def ExternV2MustError(self, input) -> Any:
        smithy_client_request: ExternV2MustErrorInput = smithygenerated.simple_dafnyexternv2.dafny_to_smithy.DafnyToSmithy_simple_dafnyexternv2_ExternV2MustErrorInput(input)
        try:
            smithy_client_response = self._impl.extern_v2_must_error(smithy_client_request)
        except ServiceError as e:
            return Wrappers.Result_Failure(smithy_error_to_dafny_error(e))

        return Wrappers.Result_Success(smithygenerated.simple_dafnyexternv2.smithy_to_dafny.SmithyToDafny_simple_dafnyexternv2_ExternV2MustErrorOutput(smithy_client_response))
